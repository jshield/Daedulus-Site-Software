:javascript 
  $(document).ready(function() {
    $('span').hide();
    $('form').hide();  
    $('span.pbody').show();
    function flash(span, msg) {
      $("span." + span).css("color","red");
      $("span." + span).text(msg).show().fadeOut(2000);
    };
       
    $('a.login').click(function() {
      $('a.login').hide();
      $('a.register').hide(); 
      $('form.login').slideDown('500');
    });
    
    $('a.register').click(function() {
      $('a.login').hide(); 
      $('a.register').hide(); 
      $('form.register').slideDown('500');
    });
    
    $('a.npst').click(function() {
      $('a.npst').hide();
      $('form.npst').slideDown('500');
    });
    
    $('#form_register').submit(function() {
      if ($("input.register.user").val() == "Username") {
        flash("username", "!");
        fail = true;
      };
      if ($("input.register.disp").val() == "Display Name") {
        flash("dispname", "!");
        fail = true;
      };
      if ($("input.register.email").val() == "Email Address") {
        flash("email", "!");
        fail = true;
      };
      if ($("input.register.pass").val() == "Password") {
        flash("pass", "!");
        fail = true;
      };
      if ($("input.register.pass2").val() != $("input.register.pass").val()) {
        flash("pass2", "!=");
        fail = true;
      };
      if (fail == true) {return false;};      
    });
    
    $('a.reply').click(function(){
      id = $(this).attr("name");
      $('p.links').hide();
      $('form.npst').load("/api/post/reply/form/" + id);
      $('a.npst').click();
    });
    
    $('a.quote').click(function() {
      id = $(this).attr("name");
      qid = $(this).attr("quote");
      $('p.links').hide();
      $('form.npst').load("/api/post/quote/form/" + qid );
      $('a.npst').click();
    });
    
    $('a.update').click(function() {
    id = $(this).attr("name");
    $('form.npst').load("/api/post/update/form/" + id );
    $('p.links').hide();   
    $('a.npst').click();
    });
    $('a.delete').click(function() {
      id = $(this).attr("name");
      if(confirm("Delete this post?")) {
        $("#reply-" + id).load("/api/post/delete/"+id);
      }
    
    });
    
   $('input.cancel').click(function() {
     $('form').slideUp(500);
     $('a.npst').show();
     $('a.login').show();
     $('a.register').show();
     $('input.npst.pid').remove();
     $('p.links').fadeIn(100);
    });   
  });
    function loadIndex() {
    $('#mainbox').hide();
    $('#mainbox').load('/api/topic/list/haml');
    $('#mainbox').fadeIn(2000);
    };
    
    function loadTopic(id) {
    $('#mainbox').hide();
    $('#mainbox').load('/api/post/list/haml/'+id);
    $('#mainbox').fadeIn(2000);
    };

